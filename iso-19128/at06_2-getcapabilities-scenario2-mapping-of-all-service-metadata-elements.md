# Scenario 2 - Mapping of service metadata elements

**Purpose**: Test that the capabilities section of the View Service contains the Service metadata elements in accordance with Table 3a (Mapping between INSPIRE metadata elements and [ISO 19128] WMS elements with the use of extended capabilities).

**Prerequisites**

This test only applies to [Scenario 2](./README.md#scenarios). Otherwise, the test case is skipped.

**Test method**

* Send a getCapabilities request to the service endpoint. Into the response, check that all the service metadata elements are provided according to the table below:



| INSPIRE Metadata element<br>(***M***andatory - ***C***onditional) | ISO 19128 or INSPIRE ExtendedCapabilities element     | XPath expression (relative to /WMS_Capabilities/)    | Multiplicity | Condition            | Specific TG requirement (if present)      | Check type         |
| -------------------------------------- | -------------------------------------------------------------------------------- | ---------------------------------------------------- | ------------ | -------------------- | ----------------------------------------- | ------------------ |
| Resource Title (_M_)                   | wms:Title                                                                        | Service/Title                                        | 1            |                      |                                           | Automatic          |
| Resource Abstract (_M_)                | wms:Abstract                                                                     | Service/Abstract                                     | 1            |                      |                                           | Automatic          |
| Resource Type (_M_)                    | inspire_common:ResourceType<br>(ExtendedCapabilities)                            | Capability/inspire_vs:ExtendedCapabilities/inspire_common:ResourceType   | 1            |          | Requirement 11: the value shall be 'service'.            | Automatic          |
| Resource Locator (_C_)                 | inspire_common:ResourceLocator<br>(ExtendedCapabilities)                         | Capability/inspire_vs:ExtendedCapabilities/inspire_common:ResourceLocator | 0..\*        | Mandatory if linkage to the service is available.   |              | Automatic + Manual |
| Coupled Resource (_C_)                 | wms:MetadataURL<br>(Layer property)                                              | Capability/Layer/Layer/MetadataURL/OnlineResource/@xlink:href     | 0..\*    | Mandatory if linkage to data sets on which the service operates are available.    | Requirement 14: the value shall be a URL that allows access to a metadata record.      | Automatic + Manual |
| Spatial Data Service Type (_M_)        | inspire_common:SpatialDataServiceType<br>(ExtendedCapabilities)      | Capability/inspire_vs:ExtendedCapabilities/inspire_common:SpatialDataServiceType   | 1        |      | Requirement 15:  the value shall be 'view'.     | Automatic          |
| Keyword (_M_)                          | wms:Keyword and wms:Keyword/@vocabulary;<br>inspire_common:Keyword      | Service/KeywordList/Keyword and Service/KeywordList/Keyword/@vocabulary;<br>Capability/inspire_vs:ExtendedCapabilities/inspire_common:MandatoryKeyword/inspire_common:KeywordValue        | 1..\*        |       | Requirement 16:  at least one keyword from the Classification of spatial data services shall be provided.      | Automatic          |
| Geographic Bounding Box (_C_)          | wms:EX_GeographicBoundingBox<br>(Layer property)          | Capability/Layer/Layer/EX_GeographicBoundingBox      | 0..\*        | Mandatory for services with an explicit geographic extent.                        |     | Automatic + Manual |
| Temporal Reference (_M_)               | inspire_common:TemporalReference<br>(ExtendedCapabilities)    | Capability/inspire_vs:ExtendedCapabilities/inspire_common:TemporalReference/inspire_common:DateOfPublication<br>Capability/inspire_vs:ExtendedCapabilities/inspire_common:TemporalReference/inspire_common:DateOfLastRevision<br>Capability/inspire_vs:ExtendedCapabilities/inspire_common:TemporalReference/inspire_common:DateOfCreation<br> | 1..\*        |                                                                                   | Requirement 20: one of the following dates shall be provided: date of publication, date of last revision, or the date of creation. Date of last revision is preferred. The date shall be expressed in conformity with ISO 8601. | Automatic          |
| Spatial Resolution (_C_)               | wms:Abstract                                                                                                           | Service/Abstract                                                                                                                                                                                                                                                                                                                               | 0..\*        | Mandatory when there is a restriction on the spatial resolution for this service. |                                                                                                                                                                                                                                 | Manual             |
| Conformity (_M_)                       | inspire_common:Conformity<br>(ExtendedCapabilities)                                                                       | Capability/inspire_vs:ExtendedCapabilities/inspire_common:Conformity                                                                                                                                                                                                                                                                           | 1..\*        |                                                                                   |                                                                                                                                                                                                                                 | Automatic          |
| Conditions for Access and Use (_M_)    | wms:Fees                                                                                                               | Service/Fees                                                                                                                                                                                                                                                                                                                                   | 1..\*        |                                                                                   | Requirement 24: If no conditions apply to the access and use of the resource, the value "no conditions apply" shall be used. If conditions are unknown "conditions unknown" shall be used.                                      | Automatic          |
| Limitations on Public Access (_M_)     | wms:AccessConstraints                                                                                                  | Service/AccessConstraints                                                                                                                                                                                                                                                                                                                      | 1..\*        |                                                                                   |                                                                                                                                                                                                                                 | Automatic          |
| Responsible Organisation (_M_)         | wms:ContactInformation/ wms:ContactPersonPrimary/ wms:ContactOrganization<br>and<br>wms:ContactInformation/ wms:ContactPosition | Service/ContactInformation/ContactPersonPrimary/ContactOrganization and<br>Service/ContactInformation/ContactPosition                                                                                                                                                                                                                          | 1..\*        |                                                                                   | Requirement 26: The value domain of the Responsible Party role shall be one of the values of code list Responsible party role.                                                                                                  | Automatic          |
| Metadata Point of Contact (_M_)        | inspire_common:MetadataPointOfContact<br>(ExtendedCapabilities)                                                           | Capability/inspire_vs:ExtendedCapabilities/inspire_common:MetadataPointOfContact/inspire_common:OrganisationName and<br>Capability/inspire_vs:ExtendedCapabilities/inspire_common:MetadataPointOfContact/inspire_common:EmailAddress                                                                                                           | 1..\*        |                                                                                   | Requirement 27: The role of the metadata point of contact shall be "pointOfContact".                                                                                                                                            | Automatic          |
| Metadata Date (_M_)                    | inspire_common:MetadataDate<br>(ExtendedCapabilities)                                                                     | Capability/inspire_vs:ExtendedCapabilities/inspire_common:MetadataDate                                                                                                                                                                                                                                                                         | 1            |                                                                                   | Requirement 29: The date shall be expressed in conformity with the [INS MD], meaning it shall be expressed in conformity with ISO 8601.                                                                                         | Automatic          |
| Metadata Language (_M_)                | inspire_common:SupportedLanguages<br>(ExtendedCapabilities)                                                               | Capability/inspire_vs:ExtendedCapabilities/inspire_common:SupportedLanguages                                                                                                                                                                                                                                                                   | 1            |                                                                                   |                                                                                                                                                                                                                                 | Automatic          |


**Reference(s)**:
* [TG VS](./README.md#ref_TG_VS), Chapter 4.2.3.3.1, Requirement 6 - Section 2, Requirement 11
* [INS MD](./README.md#ref_INS_MD), Part C - Table 2; Classification of Spatial data Services, Part D.4

**Test type**: Automated

**Notes**

As stated by the INSPIRE Metadata Technical Guidance [INS MDTG], it is not possible to express the restriction of a service concerning the spatial resolution in the current version of [ISO 19119].
While this issue is being addressed by the standardisation community, spatial resolution restrictions for services shall be written in the Abstract as mandated by the Metadata Technical Guidance [INS MDTG]. Spatial Resolution restrictions at service metadata
level shall be declaratively described in the wms:Abstract element.

For the AccessConstraints element, is recomended to use "None" value when any constrainst is applied and when constraints are imposed may be used the codelists defined in [ISO 19115, Annex B – Data Dictionary, Section 5.24].

**Contextual XPath references**

The namespace prefixes used as described in [README.md](./README.md#namespaces).
Related XPaths are provided in the table above.

Abbreviation                                               |  XPath expression (relative to /wms:WMS_Capabilities)
---------------------------------------------------------- | -------------------------------------------------------------------------

