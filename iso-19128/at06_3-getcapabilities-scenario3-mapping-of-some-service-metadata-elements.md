# Scenario 3 - Mapping of service metadata elements to the capabilities section

**Purpose**: Test that the capabilities section of the View Service contains the Service metadata elements in accordance with Table 3b (Mapping between INSPIRE metadata elements and [ISO 19128] WMS elements without the use of extended capabilities. ).

**Prerequisites**

This test only applies to [Scenario 2](./README.md#scenarios). Otherwise, the test case is skipped.

**Test method**

* Send a getCapabilities request to the service endpoint. Into the response, check that all the service metadata elements are provided according to the table below:

| INSPIRE Metadata element<br>(***M***andatory - ***C***onditional) | WMS 1.3 Capabilities without ExtendedCapabilities                                                                                                                               | Fallback                                                                                                                                                                                                                             | XPath expression (relative to /WMS_Capabilities/)                                                                     | Multiplicity | Condition                                                                         | Specific TG requirement (if present)                                                                                                                                                                                            | Check type                                                                                       |
| ----------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------- | ------------ | --------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------ |
| Resource Title (_M_)                                    | wms:Title                                                                                                                                                                       |                                                                                                                                                                                                                                      | Service/Title                                                                                                         | 1            |                                                                                   |                                                                                                                                                                                                                                 | Automatic                                                                                        |
| Resource Abstract (_M_)                                 | wms:Abstract                                                                                                                                                                    |                                                                                                                                                                                                                                      | Service/Abstract                                                                                                      | 1            |                                                                                   |                                                                                                                                                                                                                                 | Automatic                                                                                        |
| Resource Type (_M_)                                     | \-                                                                                                                                                                              | Is by default "service"                                                                                                                                                                                                              |                                                                                                                       | 1            |                                                                                   | Requirement 11: the value shall be 'service'.                                                                                                                                                                                   | Manual                                                                                           |
| Resource Locator (_C_)                                  | \-                                                                                                                                                                              | Resource Locator of the data set                                                                                                                                                                                                     |                                                                                                                       | 0..\*        | Mandatory if linkage to the service is available.                                 |                                                                                                                                                                                                                                 | Manual (Check performed on the dataset metadata by CC8)                                          |
| Coupled Resource (_C_)                                  | wms:MetadataURL (per layer)                                                                                                                                                     |                                                                                                                                                                                                                                      | Capability/Layer/Layer/MetadataURL/OnlineResource/@xlink:href                                                         | 0..\*        | Mandatory if linkage to data sets on which the service operates are available.    | Requirement 14: the value shall be a URL that allows access to a metadata record.                                                                                                                                               | Automatic + Manual                                                                               |
| Spatial Data Service Type (_M_)                         | \-                                                                                                                                                                              | In a ISO/TS 19139:2007 metadata record dataset: gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine/gmd:CI_OnlineResource/gmd:applicationProfile                   |                                                                                                                       | 1            |                                                                                   | Requirement 15:  the value shall be 'view'.                                                                                                                                                                                     | No check (Check performed on the dataset metadata by CC8)                                        |
| Keyword (_M_)                                           | wms:Keyword and wms:Keyword/@vocabulary                                                                                                                                         |                                                                                                                                                                                                                                      | Service/KeywordList/Keyword and Service/KeywordList/Keyword/@vocabulary                                               | 1..\*        |                                                                                   | Requirement 16: at least one keyword from the Classification of spatial data services shall be provided.                                                                                                                        | Automatic                                                                                        |
| Geographic Bounding Box (_C_)                           | \-                                                                                                                                                                              | Geographic Bounding Box of the data set                                                                                                                                                                                              |                                                                                                                       | 0..\*        | Mandatory for services with an explicit geographic extent.                        |                                                                                                                                                                                                                                 | Manual                                                                                           |
| Temporal Reference (_M_)                                | updateSequence attribute                                                                                                                                                        | If in the optional<br>updateSequence attribute a timestamp value is not present, the<br>Temporal Reference is mapped to the Temporal Reference of the dataset<br>metadata, in order of a date of type publication,revision creation. | /@updateSequence                                                                                                      | 1..\*        |                                                                                   | Requirement 20: one of the following dates shall be provided: date of publication, date of last revision, or the date of creation. Date of last revision is preferred. The date shall be expressed in conformity with ISO 8601. | Automatic + Manual                                                                               |
| Spatial Resolution (_C_)                                | \-                                                                                                                                                                              | Spatial Resolution of the data set                                                                                                                                                                                                   |                                                                                                                       | 0..\*        | Mandatory when there is a restriction on the spatial resolution for this service. |                                                                                                                                                                                                                                 | Manual                                                                                           |
| Conformity (_M_)                                        | wms:KeywordList/wms:Keyword; use a wms:Keyword<br>element for each specification against which the service is conformant,<br>included within an specific wms:KeywordList group. |                                                                                                                                                                                                                                      | Service/KeywordList/Keyword and Service/KeywordList/Keyword/@vocabulary                                               | 1..\*        |                                                                                   |                                                                                                                                                                                                                                 | Automatic                                                                                        |
| Conditions for Access and Use (_M_)                     | wms:Fees                                                                                                                                                                        |                                                                                                                                                                                                                                      | Service/Fees                                                                                                          | 1..\*        |                                                                                   | Requirement 24: If no conditions apply to the access and use of the resource, the value "no conditions apply" shall be used. If conditions are unknown "conditions unknown" shall be used.                                      | Automatic                                                                                        |
| Limitations on Public Access (_M_)                      | wms:AccessConstraints                                                                                                                                                           |                                                                                                                                                                                                                                      | Service/AccessConstraints                                                                                             | 1..\*        |                                                                                   |                                                                                                                                                                                                                                 | Automatic                                                                                        |
| Responsible Organisation (_M_)                          | wms:ContactInformation/wms:ContactPersonPrimary/wms:ContactOrganization and<br>wms:ContactInformation/wms:ContactPosition                                                       |                                                                                                                                                                                                                                      | Service/ContactInformation/ContactPersonPrimary/ContactOrganization and<br>Service/ContactInformation/ContactPosition | 1..\*        |                                                                                   | Requirement 26: The value domain of the Responsible Party role shall be one of the values of code list Responsible party role.                                                                                                  | Automatic                                                                                        |
| Metadata Point of Contact (_M_)                         | wms:ContactInformation/wms:ContactPersonPrimary/wms:ContactOrganization and<br>wms:ContactInformation/wms:ContactElectronicMailAddress                                          |                                                                                                                                                                                                                                      | Service/ContactInformation/ContactPersonPrimary/ContactOrganization and<br>Service/ContactInformation/ContactPosition | 1..\*        |                                                                                   | Requirement 27: The role of the metadata point of contact shall be "pointOfContact".                                                                                                                                            | Manual (the Metadata Point Of Contact is assumed to be the same as the Responsible Organisation) |
| Metadata Date (_M_)                                     | updateSequence attribute                                                                                                                                                        | If in the optional<br>updateSequence attribute a timestamp value is not present, the<br>Metadata Date is mapped to the Temporal reference of the dataset<br>metadata, in order of a date of type publication,revision creation.      | /@updateSequence                                                                                                      | 1            |                                                                                   | Requirement 29: The date shall be expressed in conformity with the [INS MD], meaning it shall be expressed in conformity with ISO 8601.                                                                                         | Automatic + Manual                                                                               |
| Metadata Language (_M_)                                 | \-                                                                                                                                                                              | Metadata Language of the data set                                                                                                                                                                                                    |                                                                                                                       | 1            |                                                                                   |                                                                                                                                                                                                                                 | Manual                                                                                           |



**Reference(s)**:
* [TG VS](./README.md#ref_TG_VS), Chapter 4.2.3.3.1, Requirement 6 - Section 2, Requirement 11
* [INS MD](./README.md#ref_INS_MD), Part C - Table 2; Classification of Spatial data Services, Part D.4

**Test type**: Automated

**Notes**

The mapping of the INSPIRE metadata elements of the data set is available in the TG Metadata.


**Contextual XPath references**

The namespace prefixes used as described in [README.md](./README.md#namespaces).
Related XPaths are provided in the table above.

Abbreviation                                               |  XPath expression (relative to /wms:WMS_Capabilities)
---------------------------------------------------------- | -------------------------------------------------------------------------

